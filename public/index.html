<!DOCTYPE html> 
<html lang="en">
<head> 
    <title>RYDEX</title> 
    <meta charset="UTF-8"/> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
    <meta name="author" content="Rydex"/> 
    <meta name="description" content="Simple Autobot"/> 
    <meta name="keywords" content="Rydex,rydexbot,rydex, rydexauto, rydex bot, bot rydex"/> 
    <link rel="stylesheet" href="assets/css/iziToast.min.css">
    <script src="assets/js/iziToast.min.js"></script>
    <style> 
        @font-face { 
            src: url('assets/fonts/Poppins-ExtraBold.ttf'); 
            font-family: Poppins; 
        } 
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            font-family: Poppins, Arial;
        } 
        
        body {
            overflow: hidden;
            background: dark;
        }
        
        section { 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background: url('assets/images/bg4.jpg') no-repeat; 
            background-size: cover; 
            background-position: center;
            animation: animateBg 2s linear infinite; 
        } 
        
        @keyframes animateBg { 
            100% { 
                filter: hue-rotate(360deg); 
            } 
        } 
        
        .login-box { 
            width: 300px; 
            height: 450px; 
            border: 2px solid rgba(255, 255, 255, 0.5); 
            border-radius: 20px; 
            backdrop-filter: blur(15px);
            padding: 20px;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        } 
        
        h2 { 
            font-size: 1.5em; 
            color: #CED1FF;
            margin-bottom: 20px;
        } 
        
        .input-box { 
            width: 100%; 
            margin: 15px 0;
            position: relative;
        } 
        
        .input-box input { 
            width: 100%; 
            height: 40px; 
            padding: 10px;
            background: transparent; 
            border: none; 
            border-bottom: 2px solid #CED1FF;
            outline: none; 
            color: #CED1FF; 
        } 
        
        .input-box label { 
            position: absolute; 
            top: 50%; 
            left: 10px;
            transform: translateY(-50%);
            font-size: 0.9em; 
            color: #CED1FF; 
            pointer-events: none; 
            transition: 0.2s; 
        } 
        
        .input-box input:focus ~ label,
        .input-box input.valid ~ label { 
            top: -10px; 
            font-size: 0.8em; 
        }
        
        button { 
            width: 80%; 
            padding: 10px; 
            background: transparent; 
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 40px; 
            color: #CED1FF; 
            cursor: pointer; 
            transition: background-color 0.3s;
        }
        
        button:disabled {
            cursor: not-allowed;
            background: rgba(255, 255, 255, 0.3);
        }
        
        button:hover:not(:disabled) { 
            background: rgba(255, 255, 255, 0.2);
        }
        
        .footer {
            margin-top: 15px;
            font-size: 0.8em;
            color: #CED1FF;
        }
    </style> 
</head> 
<body> 
    <section> 
        <div class="login-box"> 
            <h2>Rydex Bot</h2> 
            <div class="input-box"> 
                <input type="text" id="json-data"> 
                <label for="appState">App State</label> 
            </div> 
            <div class="input-box"> 
                <input type="text" id="inputOfPrefix"> 
                <label for="inputOfPrefix">Bot Prefix</label> 
            </div> 
            <div class="input-box"> 
                <input type="text" id="inputOfAdmin"> 
                <label for="inputOfAdmin">Admin ID</label> 
            </div>
            <button id="submitButton">Submit</button>
        </div>
        <div class="footer">
            <p id="foot"></p>
        </div>
    </section>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const footer = document.getElementById('foot');
        const year = new Date().getFullYear();
        footer.textContent = `Copyright Â© Rydex | All rights reserved ${year}`;

        // Add focus/blur validation effect
        document.querySelectorAll('.input-box input').forEach(input => {
            input.addEventListener('focus', () => input.classList.add('valid'));
            input.addEventListener('blur', () => !input.value && input.classList.remove('valid'));
        });

        const submitButton = document.getElementById('submitButton');
        submitButton.addEventListener('click', () => handleSubmit());

        async function handleSubmit() {
            const jsonInput = document.getElementById('json-data').value;
            const prefix = document.getElementById('inputOfPrefix').value.trim();
            const admin = document.getElementById('inputOfAdmin').value.trim().split(/\s+/);

            if (!jsonInput) {
                showResult('Missing App State');
                return;
            }

            let state;
            try {
                state = JSON.parse(jsonInput);
            } catch (error) {
                showResult('Invalid JSON. Please check your input.');
                return;
            }

            submitButton.disabled = true;  // Disable button during submission

            await fetchCommands();

            try {
                const response = await fetch('/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ state, prefix, admin, commands: Commands })
                });

                const data = await response.json();
                showResult(data.message, data.success);
                submitButton.disabled = false;  // Re-enable button after submission
            } catch (error) {
                showResult('Error communicating with server.');
                submitButton.disabled = false;
            }
        }

        function showResult(message, isSuccess = false) {
            iziToast.show({
                message,
                timeout: 3000,
                position: 'bottomCenter',
                color: isSuccess ? 'green' : 'red',
                close: false
            });
        }

        // Fetch commands from server
        let Commands = [{ commands: [] }, { handleEvent: [] }];
        async function fetchCommands() {
            try {
                const response = await fetch('/commands');
                const data = await response.json();
                Commands[0].commands = data.commands || [];
                Commands[1].handleEvent = data.handleEvent || [];
            } catch (error) {
                showResult('Failed to fetch commands.');
            }
        }
    });

    // Disable common context menu, copy, cut, paste events
    ['selectstart', 'copy', 'cut'].forEach(event => {
        document.addEventListener(event, e => e.preventDefault());
    });
    </script>
</body> 
</html>
